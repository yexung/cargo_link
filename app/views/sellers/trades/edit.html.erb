<%# 판매자 P2P 거래 수정 페이지 %>
<div class="min-h-screen bg-gray-50 py-8">
  <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
    <!-- 뒤로가기 버튼 -->
    <div class="mb-6">
      <%= link_to sellers_trade_path(@trade), class: "text-green-600 hover:text-green-800 flex items-center" do %>
        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
        </svg>
        거래 상세보기로 돌아가기
      <% end %>
    </div>

    <div class="bg-white rounded-lg shadow-sm">
      <div class="px-6 py-4 border-b border-gray-200">
        <h1 class="text-2xl font-bold text-gray-900">P2P 거래 수정</h1>
        <p class="text-gray-600 mt-2">거래 정보를 수정해주세요</p>
      </div>

      <div class="px-6 py-6">
        <%= form_with model: @trade, url: sellers_trade_path(@trade), method: :patch, local: true, class: "space-y-8" do |form| %>
          <% if @trade&.errors&.any? %>
            <div class="bg-red-50 border border-red-200 rounded-md p-4">
              <h3 class="text-sm font-medium text-red-800">다음 오류를 확인해주세요:</h3>
              <ul class="mt-2 text-sm text-red-700 list-disc list-inside">
                <% @trade.errors.full_messages.each do |message| %>
                  <li><%= message %></li>
                <% end %>
              </ul>
            </div>
          <% end %>

          <!-- 기본 정보 -->
          <div>
            <h3 class="text-lg font-semibold text-gray-900 mb-4">기본 정보</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div>
                <%= form.label :title, "제목", class: "block text-sm font-medium text-gray-700 mb-2" %>
                <%= form.text_field :title, class: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500" %>
              </div>
              
              <div>
                <%= form.label :price, "가격 (원)", class: "block text-sm font-medium text-gray-700 mb-2" %>
                <%= form.number_field :price, class: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500" %>
              </div>
              
              <div>
                <%= form.label :trade_type, "거래 방식", class: "block text-sm font-medium text-gray-700 mb-2" %>
                <%= form.select :trade_type, 
                    options_for_select([
                      ['직거래', 'direct'],
                      ['택배거래', 'delivery'],
                      ['상담 후 결정', 'negotiable']
                    ], @trade&.trade_type), 
                    { prompt: "거래 방식을 선택하세요" }, 
                    { class: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500" } %>
              </div>
              
              <div>
                <%= form.label :location, "위치", class: "block text-sm font-medium text-gray-700 mb-2" %>
                <%= form.text_field :location, class: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500" %>
              </div>
            </div>
          </div>

          <!-- 차량 정보 -->
          <div>
            <h3 class="text-lg font-semibold text-gray-900 mb-4">차량 정보</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div>
                <%= form.label :brand, "브랜드", class: "block text-sm font-medium text-gray-700 mb-2" %>
                <%= form.text_field :brand, class: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500" %>
              </div>
              
              <div>
                <%= form.label :model, "모델", class: "block text-sm font-medium text-gray-700 mb-2" %>
                <%= form.text_field :model, class: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500" %>
              </div>
              
              <div>
                <%= form.label :year, "연식", class: "block text-sm font-medium text-gray-700 mb-2" %>
                <%= form.number_field :year, class: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500" %>
              </div>
              
              <div>
                <%= form.label :mileage, "주행거리 (km)", class: "block text-sm font-medium text-gray-700 mb-2" %>
                <%= form.number_field :mileage, class: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500" %>
              </div>
              
              <div>
                <%= form.label :fuel_type, "연료", class: "block text-sm font-medium text-gray-700 mb-2" %>
                <%= form.select :fuel_type, 
                    options_for_select([
                      ['가솔린', 'gasoline'],
                      ['디젤', 'diesel'],
                      ['하이브리드', 'hybrid'],
                      ['전기', 'electric'],
                      ['LPG', 'lpg']
                    ], @trade&.fuel_type), 
                    { prompt: "연료를 선택하세요" }, 
                    { class: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500" } %>
              </div>
              
              <div>
                <%= form.label :transmission, "변속기", class: "block text-sm font-medium text-gray-700 mb-2" %>
                <%= form.select :transmission, 
                    options_for_select([
                      ['자동', 'automatic'],
                      ['수동', 'manual'],
                      ['CVT', 'cvt']
                    ], @trade&.transmission), 
                    { prompt: "변속기를 선택하세요" }, 
                    { class: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500" } %>
              </div>
              
              <div>
                <%= form.label :color, "색상", class: "block text-sm font-medium text-gray-700 mb-2" %>
                <%= form.text_field :color, class: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500" %>
              </div>
            </div>
          </div>

          <!-- 상세 설명 -->
          <div>
            <h3 class="text-lg font-semibold text-gray-900 mb-4">상세 설명</h3>
            <%= form.label :description, "차량 상태 및 기타 정보", class: "block text-sm font-medium text-gray-700 mb-2" %>
            <%= form.text_area :description, rows: 6, class: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500" %>
          </div>

          <!-- 연락처 정보 -->
          <div>
            <h3 class="text-lg font-semibold text-gray-900 mb-4">연락처 정보</h3>
            <%= form.label :contact_info, "연락처", class: "block text-sm font-medium text-gray-700 mb-2" %>
            <%= form.text_area :contact_info, rows: 3, class: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500" %>
          </div>

          <!-- 제출 버튼 -->
          <div class="flex gap-4 pt-6 border-t border-gray-200">
            <%= form.submit "수정 완료", class: "bg-green-600 text-white px-6 py-3 rounded-md hover:bg-green-700 transition-colors font-medium" %>
            <%= link_to "취소", sellers_trade_path(@trade), class: "bg-gray-600 text-white px-6 py-3 rounded-md hover:bg-gray-700 transition-colors font-medium" %>
            <%= button_to "삭제", sellers_trade_path(@trade), 
                method: :delete,
                data: { 
                  turbo_confirm: "정말 삭제하시겠습니까?"
                },
                class: "bg-red-600 text-white px-6 py-3 rounded-md hover:bg-red-700 transition-colors font-medium border-0" %>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>